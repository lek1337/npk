<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞–π —Ç—ã–ª–¥—å—ã—Ç ‚Äî –°–ª–æ–≤–∞—Ä—å –∏ –ø–µ—Å–Ω–∏</title>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
<style>
/* –°—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–∞–∫–∏–º–∏ –∂–µ –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –∫–æ–¥–µ */
:root{
  --bg:#f6efe6;
  --card:#fffdf7;
  --paper:#f3ead7;
  --accent:#6b4f2b;
  --text:#2b2b2b;
  --muted:#6b6b6b;
  --shadow: rgba(43,43,43,0.08);
}
*{box-sizing:border-box}
body{margin:0;font-family:'Merriweather', Georgia, serif;background:linear-gradient(180deg,var(--bg),#efe6d5);color:var(--text);-webkit-font-smoothing:antialiased;}
.header{padding:1.2rem 1.6rem;background:transparent;border-bottom:1px solid rgba(107,79,43,0.1);}
.header-content{max-width:1100px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;}
.title{font-size:1.4rem;font-weight:700;color:var(--accent);}
.nav{display:flex;gap:1.5rem;}
.nav-btn{padding:0.5rem 1rem;border:none;background:transparent;border-radius:8px;cursor:pointer;font-weight:600;color:var(--muted);transition:all 0.3s;}
.nav-btn.active{background:var(--accent);color:#fff;box-shadow:0 4px 14px rgba(107,79,43,0.12);}
.nav-btn:hover:not(.active){background:rgba(107,79,43,0.1);}
.subtitle{font-size:0.9rem;color:var(--muted);margin-top:0.2rem;}

.container{max-width:1100px;margin:1rem auto;padding:1rem;display:flex;gap:1.25rem}
.sidebar{width:280px;flex-shrink:0;position:sticky;top:20px;height:calc(100vh - 40px);overflow:auto;padding:1rem;background:transparent}
.search{width:100%;padding:0.7rem 0.9rem;border-radius:10px;border:1px solid rgba(107,79,43,0.12);background:linear-gradient(180deg,#fff,#fffaf0)}
.letters{margin-top:0.8rem;display:flex;flex-wrap:wrap;gap:0.35rem}
.letters button{background:transparent;border:1px solid rgba(107,79,43,0.08);padding:0.35rem 0.6rem;border-radius:6px;cursor:pointer;font-weight:600;color:var(--accent)}
.letters button.active{background:var(--accent);color:#fff;box-shadow:0 4px 14px rgba(107,79,43,0.12);transform:translateY(-2px)}

.fav-title{margin-top:1rem;font-size:0.95rem;font-weight:700;color:var(--accent)}
.fav-list{margin-top:0.5rem;background:linear-gradient(180deg,#fff,#fffaf0);padding:0.5rem;border-radius:8px;border:1px solid rgba(43,43,43,0.03);max-height:240px;overflow:auto}

.list{flex:1;padding:0.2rem 0.25rem;display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1rem;align-items:start}
.card{background:var(--card);border-radius:12px;padding:1rem 1.1rem;box-shadow:0 8px 24px var(--shadow);border:1px solid rgba(43,43,43,0.03);position:relative;transition:transform .25s,box-shadow .25s;cursor:pointer;}
.card:hover{transform:translateY(-6px)}
.card::before{content:'';position:absolute;left:14px;top:14px;width:40px;height:40px;border-radius:8px;background:linear-gradient(180deg,#fffaf0,#f2e6cf);box-shadow:inset 0 -2px 6px rgba(0,0,0,0.03)}
.word{margin:0;padding-left:60px;font-size:1.12rem;font-weight:700;color:var(--accent)}
.pos{font-weight:600;font-size:0.86rem;color:var(--muted);margin-left:8px}
.def{margin-top:0.5rem;padding-left:60px;color:var(--text);line-height:1.55;white-space:pre-line}
.actions{margin-top:0.8rem;padding-left:60px;display:flex;gap:0.5rem}
.btn{border:1px solid rgba(43,43,43,0.06);background:linear-gradient(180deg,#fff,#fffaf0);padding:0.4rem 0.7rem;border-radius:8px;cursor:pointer;font-weight:600}
.btn:hover{background:var(--accent);color:#fff;transform:translateY(-2px)}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–µ—Å–µ–Ω */
.songs-page{display:none;}
.song-card{background:var(--card);border-radius:12px;padding:1.5rem;box-shadow:0 8px 24px var(--shadow);border:1px solid rgba(43,43,43,0.03);margin-bottom:1.5rem;}
.song-title{font-size:1.3rem;font-weight:700;color:var(--accent);margin-bottom:1rem;border-bottom:2px solid var(--accent);padding-bottom:0.5rem;}
.song-content{color:var(--text);line-height:1.8;white-space:pre-line;font-size:0.95rem;}
.song-meta{color:var(--muted);font-size:0.85rem;margin-top:1rem;font-style:italic;}

/* –ê—É–¥–∏–æ –ø–ª–µ–µ—Ä */
.audio-player{background:linear-gradient(180deg,#fffaf0,#f2e6cf);border-radius:12px;padding:1rem;margin:1rem 0;border:1px solid rgba(107,79,43,0.1);}
.player-controls{display:flex;align-items:center;gap:1rem;margin-bottom:0.5rem;}
.play-btn{background:var(--accent);color:white;border:none;border-radius:50%;width:40px;height:40px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.2rem;transition:all 0.3s;}
.play-btn:hover{transform:scale(1.1);box-shadow:0 4px 12px rgba(107,79,43,0.3);}
.progress-container{flex:1;background:rgba(107,79,43,0.1);border-radius:10px;height:6px;cursor:pointer;position:relative;}
.progress-bar{background:var(--accent);border-radius:10px;height:100%;width:0%;transition:width 0.1s;}
.time{display:flex;justify-content:space-between;color:var(--muted);font-size:0.8rem;}
.volume-controls{display:flex;align-items:center;gap:0.5rem;margin-top:0.5rem;}
.volume-icon{color:var(--muted);font-size:1rem;}
.volume-slider{flex:1;background:rgba(107,79,43,0.1);border-radius:10px;height:4px;cursor:pointer;}

.header-note{text-align:center;color:var(--muted);font-size:0.9rem;margin-top:0.5rem}

/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);backdrop-filter:blur(4px)}
.modal-content{background:var(--card);margin:2% auto;padding:0;border-radius:16px;width:90%;max-width:600px;max-height:90vh;overflow:auto;box-shadow:0 20px 60px rgba(0,0,0,0.3);border:1px solid rgba(107,79,43,0.1)}
.modal-header{padding:1.5rem;border-bottom:1px solid rgba(107,79,43,0.1);display:flex;justify-content:space-between;align-items:center;background:linear-gradient(180deg,#fffaf0,#f2e6cf)}
.modal-title{font-size:1.4rem;font-weight:700;color:var(--accent);margin:0}
.close{color:#aaa;float:right;font-size:2rem;font-weight:bold;cursor:pointer;line-height:1;transition:color .3s}
.close:hover{color:var(--accent)}
.modal-body{padding:1.5rem}
.word-image{width:100%;height:200px;background:linear-gradient(135deg,#f3ead7,#e8dcc3);border-radius:12px;margin-bottom:1.5rem;display:flex;align-items:center;justify-content:center;overflow:hidden;border:1px solid rgba(107,79,43,0.1)}
.word-image img{width:100%;height:100%;object-fit:cover;display:none}
.word-image .placeholder{color:var(--muted);font-size:1rem;text-align:center;padding:2rem}
.word-info{margin-bottom:1.5rem}
.info-row{display:flex;margin-bottom:0.8rem;padding:0.5rem;background:rgba(246,239,230,0.5);border-radius:8px}
.info-label{font-weight:700;color:var(--accent);min-width:120px}
.info-value{flex:1;color:var(--text)}
.modal-actions{display:flex;gap:0.8rem;justify-content:flex-end;border-top:1px solid rgba(107,79,43,0.1);padding-top:1.5rem}

.audio-note{background:#fffaf0;padding:0.8rem;border-radius:8px;margin:1rem 0;font-size:0.9rem;color:var(--muted);border-left:4px solid var(--accent);}

@media (max-width:900px){.container{flex-direction:column}.sidebar{width:100%;position:relative;height:auto}}
@media (max-width:600px){.modal-content{width:95%;margin:5% auto}}
</style>
</head>
<body>
<header class="header">
  <div class="header-content">
    <div>
      <div class="title">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞–π —Ç—ã–ª–¥—å—ã—Ç</div>
      <div class="subtitle" id="pageSubtitle">–°–ª–æ–≤–∞—Ä—å —è–∫—É—Ç—Å–∫–æ–≥–æ —è–∑—ã–∫–∞</div>
    </div>
    <nav class="nav">
      <button class="nav-btn active" onclick="showPage('dictionary')">üìö –°–ª–æ–≤–∞—Ä—å</button>
      <button class="nav-btn" onclick="showPage('songs')">üéµ –ü–µ—Å–Ω–∏</button>
    </nav>
  </div>
</header>

<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ª–æ–≤–∞—Ä—è -->
<div id="dictionary-page" class="container">
  <aside class="sidebar">
    <input id="search" class="search" placeholder="üîç –ü–æ–∏—Å–∫ —Å–ª–æ–≤–∞..." />
    <div class="letters" id="letters"></div>
    <div class="fav-title">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</div>
    <ul class="fav-list" id="favorites"><li style="color:var(--muted)">–ü–æ–∫–∞ –Ω–µ—Ç</li></ul>
    <div class="header-note">–ü–æ–¥—Å–∫–∞–∑–∫–∞: –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–ª–æ–≤–æ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</div>
  </aside>

  <section class="list" id="list"></section>
</div>

<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Å–µ–Ω -->
<div id="songs-page" class="container songs-page">
  <div style="width:100%;">
    <div class="audio-note">
      üí° <strong>–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –º—É–∑—ã–∫—É:</strong> –ó–∞–º–µ–Ω–∏—Ç–µ —Å—Å—ã–ª–∫–∏ –≤ –∫–æ–¥–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ MP3 —Ñ–∞–π–ª—ã. 
      –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SoundCloud, –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫—É –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ –ª—é–±–æ–π —Ñ–∞–π–ª–æ–≤—ã–π —Ö–æ—Å—Ç–∏–Ω–≥.
    </div>

    <div class="song-card">
      <div class="song-title">–°–∞–π—ã“•“•—ã</div>
      <div class="audio-player" id="player-sayynghi">
        <div class="player-controls">
          <button class="play-btn" onclick="togglePlay('sayynghi')">‚ñ∂</button>
          <div class="progress-container" onclick="seek('sayynghi', event)">
            <div class="progress-bar" id="progress-sayynghi"></div>
          </div>
          <span id="time-sayynghi">0:00 / 0:00</span>
        </div>
        <div class="time">
          <span id="currentTime-sayynghi">0:00</span>
          <span id="duration-sayynghi">0:00</span>
        </div>
        <div class="volume-controls">
          <span class="volume-icon">üîä</span>
          <input type="range" class="volume-slider" min="0" max="1" step="0.1" value="1" onchange="setVolume('sayynghi', this.value)">
        </div>
      </div>
      <div class="song-content">–°–∞–π–º–∞–∞—Ä—ã–π–∞—Ä –∫“Ø–Ω“Ø–º —Ç–∞—Ö—Å–∞–Ω
–ê–∞–Ω –¥–æ–π–¥—É–±–∞—Ä –∞–Ω–∞–∞—Ä–∞—Ä,
–ê—Ä—ã–ª—ã —Ç–∏—ç—Ä–±—ç—Å –∫”©–ª“Ø—á—á—ç–º
–ö”©–º“Ø—Å –¥–æ–ª–≥—É–Ω—É–Ω –∫”©—Ç”©“ï”©—Ä.

–°—ã“ª—ã—ã–ª–∞—Ä—ã–º —Å–∏–∫–∫–∏—ç—Ä–∏–Ω—ç–Ω 
–°—ã–π–º–∞–∞—Ä—ã—á—á—ã —Ç–∞—Ä–∞–∞–Ω–Ω—ã–ª–∞—Ä,
–°–∏—Ä —Å–∏–º—ç“ï—ç —Å–∏–±—ç–∫–∫–∏–ª—ç—Ä–∏–º
–°–∏–∏–≥–∏–Ω—ç–Ω —Å–∏–º–∏—Ä–∏“•–Ω–∏–∏–ª–ª—ç—Ä.

–¢—É–Ω–∞—Ö “Ø—Ä“Ø–º—ç—á—á–∏–ª—ç—Ä—ç —Ç—É—Ä—Ç–∞“•–Ω–∞“ª–∞
–•–æ–Ω—É—É–≥–∞ —Ö–æ–π–¥–æ —Ç—ç–ª—ç—ç—Ä–±–∏—Ç—Ç—ç—Ä,
–´—Ä—ã–∞ —á—ã—ã—á–∞–∞—Ö—Ç–∞—Ä—ã–º –∫—É–æ—Ç–∞–ª–∞“ª–∞
–ß—ã–±—ã–≥—ã—Ä—ã—ã —á—É–≥–¥–∞–∞—Ä–±—ã—Ç—Ç–∞—Ä.

–û–æ–π, –∞—Ä—ã–ª—ã–π–∞—Ä –∞–ª–∞–∞“ª—ã–º,
–£–π–≥—É —Å–∞–π—ã–Ω—Ç–∞–Ω –∏—Ç–∏—Ä–¥–∏–º,
–ö”©“•“Ø–ª —Å–∞–Ω–∞–∞–±—ã–Ω –±–∞—Ç—ã“ª–∞–Ω
–ö“Ø–Ω –∫”©—Ä“Ø–≥—ç—Ä –∫”©“ï“Ø–π–¥“Ø–º.

–¢—É–Ω–∞—Ö “Ø—Ä“Ø–º—ç—á—á–∏—Ç—ç –±—É–æ–ª–∞–º–º—ã–Ω
–°–∏—Ä —Å–∏–º—ç“ï–∏–Ω —Å–∏—Ç—ç—Ä—Å–∏—ç–º,
–ö“Ø”©—Ä—ç–≥—ç–π —á—ã—á–∞–∞—Ö –±—É–æ–ª–∞–º–º—ã–Ω
–ö“Ø”©—Ö –¥–æ–π–¥—É–±—É–Ω —Ö–æ“ª—É–π—É–æ–º.</div>
      <div class="song-meta">–ú–µ–ª. –£–ª—å—è–Ω–∞ –°–µ—Ä–≥—É—á–µ–≤–∞</div>
    </div>

    <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Å–Ω–∏ —Å —Ç–∞–∫–∏–º –∂–µ –ø–ª–µ–µ—Ä–æ–º -->
    <div class="song-card">
      <div class="song-title">–°—É–æ–ª–ª–∞—Ä</div>
      <div class="audio-player" id="player-suollar">
        <div class="player-controls">
          <button class="play-btn" onclick="togglePlay('suollar')">‚ñ∂</button>
          <div class="progress-container" onclick="seek('suollar', event)">
            <div class="progress-bar" id="progress-suollar"></div>
          </div>
          <span id="time-suollar">0:00 / 0:00</span>
        </div>
        <div class="time">
          <span id="currentTime-suollar">0:00</span>
          <span id="duration-suollar">0:00</span>
        </div>
        <div class="volume-controls">
          <span class="volume-icon">üîä</span>
          <input type="range" class="volume-slider" min="0" max="1" step="0.1" value="1" onchange="setVolume('suollar', this.value)">
        </div>
      </div>
      <div class="song-content">–ú–∏–Ω “Ø–π—ç–º —É–ª—É—É —Ö–æ—Ä—É–∫ —Ç—ã–º—ã—Ä–¥–∞—Ä–∞ –±—É–æ–ª–∞–Ω,
–ê–π–≥—ã—Å—Ç–∞–ª–ª–∞—Ä –∞–∞—Ä–∞–∞–Ω –∞–∞—Ä—Ç—ã–∫—Ç–∞—Ä...
–û–ª —Ö–æ—Ä—É–∫ —Ç—ã–º—ã—Ä –±–∏–∏—Ä –∫—ã“ª—ã–ª —Ç–∞–º–º–∞“ï–∞ –±—É–æ–ª–∞,
–ú–∏–Ω –∫“Ø”©-–¥—å–∞–∞ —Ç–∞—Ö—Å–∞–±—ã–Ω –∞–π–∞–Ω —Å—É–æ–ª—É–≥–∞—Ä.

–ê—Ä—ã—Ç —ã—Ç—ã–ª–ª—ã–±—ã—Ç –±—ã—ã—Ä–∞ –æ—Ö –æ“ï–æ—Ç–æ –±—É–æ–ª–∞–Ω, 
–ê—Ö—Å—ã–º –∞–π–∞–Ω–Ω–∞—Ä—ã –∞–π–∞–Ω–Ω—ã—ã–±—ã–Ω,
–ê—Ä—ã—Ç —Ç—É–º–∞—Ä–∞“ï–∞ –º—É–º–º—É—Ç —Ç—É–≥—É—Ç—á–∞–∞–Ω –∫—É—Ä–¥—É–∫,
–¢—É–æ—Ä–∞ –¥—å–æ–Ω —ã—ã—Ä–¥–∞—Ä—ã–≥–∞—Ä –º—É–Ω—á–∞–∞—Ä–∞–±—ã–Ω.

–û–æ, –æ–ª —ç—Ä—ç—ç—Ä–∏ —Ö–∞–π–∞–∞–Ω –¥–∞ ”©—Ç”©—Ö–ø”©—Ä —Ç”©–Ω–Ω”©–±“Ø–Ω,
–´—Ä–±—ã—Ç –∞–π–∞–Ω –∞—Ç—ã–Ω—ã—ã –∏“•—ç—Ä—Å–∏–π—ç...
–û–ª —É–ª—É—É —Ç“Ø–±—ç–ª—Ç—ç—Ä—ç–Ω –∫—ç–ª—ç—ç—Ç–∏–Ω –∞—Ç—ã“•—ã—Ä—ã—ã –∫”©—Ä”©–±“Ø–Ω
–¢”©—Ä”©”©–±“Ø—Ç –∞–ª–∞–∞—Å–ø—ã–Ω –º—ã—ã–Ω–∞, —Å–æ“•—É–π–∞...</div>
      <div class="song-meta">–´—Ä—ã–∞ —Ö–æ–º—É—É—Ä—É–Ω–Ω—å—É–≥–∞</div>
    </div>

    <!-- –î–æ–±–∞–≤—å—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Å–Ω–∏ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ -->
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div id="wordModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title" id="modalWordTitle"></h2>
      <span class="close">&times;</span>
    </div>
    <div class="modal-body">
      <div class="word-image">
        <img id="modalWordImage" src="" alt="">
        <div class="placeholder">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</div>
      </div>
      <div class="word-info">
        <div class="info-row">
          <div class="info-label">–°–ª–æ–≤–æ:</div>
          <div class="info-value" id="modalWord"></div>
        </div>
        <div class="info-row">
          <div class="info-label">–ß–∞—Å—Ç—å —Ä–µ—á–∏:</div>
          <div class="info-value" id="modalPos"></div>
        </div>
        <div class="info-row">
          <div class="info-label">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:</div>
          <div class="info-value" id="modalDefinition"></div>
        </div>
        <div class="info-row">
          <div class="info-label">–ü—Ä–∏–º–µ—Ä—ã:</div>
          <div class="info-value" id="modalExamples"></div>
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn" onclick="copyText(currentWordId)">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        <button class="btn" onclick="toggleFav(currentWordId)">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
        <button class="btn" onclick="closeModal()">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>
</div>

<footer style="text-align:center;padding:1rem 0;color:var(--muted)">¬© 2025 ¬´–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞–π —Ç—ã–ª–¥—å—ã—Ç¬ª ‚Äî —Å–ª–æ–≤–∞—Ä—å –∏ –ø–µ—Å–Ω–∏</footer>

<script>
// üîß –ó–î–ï–°–¨ –ù–£–ñ–ù–û –ó–ê–ú–ï–ù–ò–¢–¨ –°–°–´–õ–ö–ò –ù–ê –†–ï–ê–õ–¨–ù–´–ï –ê–£–î–ò–û–§–ê–ô–õ–´
const audioFiles = {
  'sayynghi': 'https://drive.google.com/file/d/1U_Fuiom1W4rIOFowxANqhjgo9eH7aR97/view?usp=sharing',
  'suollar': 'https://–≤–∞—à-—Ö–æ—Å—Ç–∏–Ω–≥.com/audio/suollar.mp3',
  'sakha-unkuute': 'https://–≤–∞—à-—Ö–æ—Å—Ç–∏–Ω–≥.com/audio/sakha-unkuute.mp3',
  'ferma-kyrgyttara': 'https://–≤–∞—à-—Ö–æ—Å—Ç–∏–Ω–≥.com/audio/ferma-kyrgyttara.mp3',
  'kihiyehe-toroobyt-doydu': 'https://–≤–∞—à-—Ö–æ—Å—Ç–∏–Ω–≥.com/audio/kihiyehe-toroobyt-doydu.mp3'
};

const audioPlayers = {};
let currentAudio = null;

// –°–æ–∑–¥–∞–µ–º –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã
Object.keys(audioFiles).forEach(songId => {
  const audio = new Audio();
  audio.src = audioFiles[songId];
  audio.volume = 1;
  
  audio.addEventListener('loadedmetadata', () => {
    document.getElementById(`duration-${songId}`).textContent = formatTime(audio.duration);
  });
  
  audio.addEventListener('timeupdate', () => {
    updateProgress(songId);
  });
  
  audio.addEventListener('ended', () => {
    resetPlayer(songId);
  });
  
  audioPlayers[songId] = audio;
});

function togglePlay(songId) {
  const audio = audioPlayers[songId];
  const playBtn = document.querySelector(`#player-${songId} .play-btn`);
  
  if (currentAudio && currentAudio !== audio) {
    currentAudio.pause();
    resetPlayer(getSongIdByAudio(currentAudio));
  }
  
  if (audio.paused) {
    audio.play().catch(error => {
      console.log('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:', error);
      alert('–ê—É–¥–∏–æ—Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω. –ó–∞–º–µ–Ω–∏—Ç–µ —Å—Å—ã–ª–∫—É –≤ –∫–æ–¥–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π MP3 —Ñ–∞–π–ª.');
    });
    playBtn.textContent = '‚è∏';
    currentAudio = audio;
  } else {
    audio.pause();
    playBtn.textContent = '‚ñ∂';
  }
}

function updateProgress(songId) {
  const audio = audioPlayers[songId];
  if (audio.duration) {
    const progress = (audio.currentTime / audio.duration) * 100;
    document.getElementById(`progress-${songId}`).style.width = `${progress}%`;
    document.getElementById(`currentTime-${songId}`).textContent = formatTime(audio.currentTime);
    document.getElementById(`time-${songId}`).textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
  }
}

function seek(songId, event) {
  const audio = audioPlayers[songId];
  const progressContainer = event.currentTarget;
  const clickX = event.offsetX;
  const width = progressContainer.offsetWidth;
  const seekTime = (clickX / width) * audio.duration;
  audio.currentTime = seekTime;
}

function setVolume(songId, volume) {
  const audio = audioPlayers[songId];
  audio.volume = volume;
}

function resetPlayer(songId) {
  const playBtn = document.querySelector(`#player-${songId} .play-btn`);
  playBtn.textContent = '‚ñ∂';
  document.getElementById(`progress-${songId}`).style.width = '0%';
  document.getElementById(`currentTime-${songId}`).textContent = '0:00';
}

function formatTime(seconds) {
  if (isNaN(seconds)) return '0:00';
  const mins = Math.floor(seconds / 60);
  const secs = Math.floor(seconds % 60);
  return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
}

function getSongIdByAudio(audio) {
  for (const [songId, audioObj] of Object.entries(audioPlayers)) {
    if (audioObj === audio) return songId;
  }
  return null;
}

// –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —Å–ª–æ–≤–∞—Ä—è...
const entries = [
  {
    "id": 20,
    "word": "–ê—á–∞",
    "pos": "—Å—É—â.",
    "definition": "–±—É—Ä–¥—É–∫ —Å–æ–ª–æ–º–æ—Ç—É–≥–∞—Ä –º–∞–∞—Ä—ã–Ω–Ω—ã—ã—Ä, —É“ª—É–Ω –∞“ï—ã–π–∞—Ö —Å—ç–±–∏—Ä–¥—ç—Ö—Ç—ç—ç—Ö, –±”©“ï”© —Å–∏–ª–∏—Å—Ç—ç—ç—Ö –∫—ã—Ç–∞–∞–Ω–∞—Ö –æ—Ç. –ü—ã—Ä–µ–π.",
    "examples": "–°–∞“•–∞ —Ç—ã–ª–ª–∞—Ä –∞—á–∞–º —Å–∞–ª–∞–∞—Ç–∞ —Ö–∞–º—Å—ã—ã-—Ö–∞–º—Å—ã—ã “Ø“Ø–Ω—ç–Ω –±–∞—Ä–∞—Ä. ¬´–°–∞–∞—Å¬ª –ê–ª–ø–∞–∞–±—ã—Ç",
    "image": "https://via.placeholder.com/400x200/f3ead7/6b4f2b?text=–ê—á–∞"
  }
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞
];

let favorites = new Set();
let activeLetter = null;
let currentWordId = null;
let currentPage = 'dictionary';

const lettersEl = document.getElementById('letters');
const listEl = document.getElementById('list');
const searchEl = document.getElementById('search');
const favEl = document.getElementById('favorites');
const modal = document.getElementById('wordModal');
const closeBtn = document.querySelector('.close');

function init() {
  renderLetters();
  renderList();
  searchEl.addEventListener('input', renderList);
  
  closeBtn.addEventListener('click', closeModal);
  window.addEventListener('click', (e) => {
    if (e.target === modal) closeModal();
  });
}

function showPage(page) {
  document.getElementById('dictionary-page').style.display = 'none';
  document.getElementById('songs-page').style.display = 'none';
  
  document.querySelectorAll('.nav-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  
  if (page === 'dictionary') {
    document.getElementById('dictionary-page').style.display = 'flex';
    document.querySelector('.nav-btn[onclick="showPage(\'dictionary\')"]').classList.add('active');
    document.getElementById('pageSubtitle').textContent = '–°–ª–æ–≤–∞—Ä—å —è–∫—É—Ç—Å–∫–æ–≥–æ —è–∑—ã–∫–∞';
    currentPage = 'dictionary';
  } else if (page === 'songs') {
    document.getElementById('songs-page').style.display = 'flex';
    document.querySelector('.nav-btn[onclick="showPage(\'songs\')"]').classList.add('active');
    document.getElementById('pageSubtitle').textContent = '–Ø–∫—É—Ç—Å–∫–∏–µ –ø–µ—Å–Ω–∏ –∏ —Å—Ç–∏—Ö–∏';
    currentPage = 'songs';
  }
}

// ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–ª–æ–≤–∞—Ä—è

function renderLetters() {
  const letters = [...new Set(entries.map(e => (e.word||'')[0]?.toUpperCase()))].filter(Boolean).sort((a,b)=> a.localeCompare(b,'ru'));
  lettersEl.innerHTML = '<button data-letter="" class="active">–í—Å–µ</button>' + letters.map(l=>`<button data-letter="${l}">${l}</button>`).join('');
  lettersEl.querySelectorAll('button').forEach(btn=>{
    btn.addEventListener('click', ()=> {
      activeLetter = btn.dataset.letter || null;
      lettersEl.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      renderList();
    });
  });
}

function renderList() {
  const q = (searchEl.value||'').trim().toLowerCase();
  const filtered = entries.filter(e=>{
    if (activeLetter && (e.word||'')[0].toUpperCase() !== activeLetter) return false;
    if (!q) return true;
    return (e.word||'').toLowerCase().includes(q);
  }).sort((a,b)=> (a.word||'').localeCompare(b.word||'','ru'));

  if (filtered.length === 0) {
    listEl.innerHTML = '<div style="grid-column:1/-1;padding:2rem;background:linear-gradient(180deg,#fff,#fffaf0);border-radius:12px;text-align:center;color:var(--muted)">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
    favEl.innerHTML = '<li style="color:var(--muted)">–ü–æ–∫–∞ –Ω–µ—Ç</li>';
    return;
  }

  listEl.innerHTML = filtered.map(item => `
    <article class="card" data-id="${item.id}" onclick="openModal(${item.id})">
      <h3 class="word">${escapeHtml(item.word)} <span class="pos">${escapeHtml(item.pos||'')}</span></h3>
      <div class="def">${escapeHtml((item.definition||'').substring(0, 100) + '...')}</div>
      <div class="actions">
        <button class="btn" onclick="event.stopPropagation();openModal(${item.id})">üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
        <button class="btn" onclick="event.stopPropagation();toggleFav(${item.id})">${favorites.has(item.id)?'‚òÖ':'‚òÜ'} –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
      </div>
    </article>
  `).join('');
  renderFavorites();
}

function renderFavorites() {
  const favs = entries.filter(e => favorites.has(e.id));
  if (favs.length === 0) {
    favEl.innerHTML = '<li style="color:var(--muted)">–ü–æ–∫–∞ –Ω–µ—Ç</li>';
    return;
  }
  favEl.innerHTML = favs.map(f=>`<li onclick="openModal(${f.id})" style="cursor:pointer;padding:0.2rem 0;">${escapeHtml(f.word)}</li>`).join('');
}

function openModal(id) {
  const item = entries.find(e => e.id === id);
  if (!item) return;
  
  currentWordId = id;
  
  document.getElementById('modalWordTitle').textContent = item.word;
  document.getElementById('modalWord').textContent = item.word;
  document.getElementById('modalPos').textContent = item.pos || '–Ω–µ —É–∫–∞–∑–∞–Ω–æ';
  document.getElementById('modalDefinition').textContent = item.definition || '–Ω–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è';
  document.getElementById('modalExamples').textContent = item.examples || '–ø—Ä–∏–º–µ—Ä—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç';
  
  const img = document.getElementById('modalWordImage');
  const placeholder = document.querySelector('.word-image .placeholder');
  
  if (item.image) {
    img.src = item.image;
    img.style.display = 'block';
    placeholder.style.display = 'none';
  } else {
    img.style.display = 'none';
    placeholder.style.display = 'block';
  }
  
  modal.style.display = 'block';
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  modal.style.display = 'none';
  document.body.style.overflow = 'auto';
}

function toggleFav(id) {
  if (favorites.has(id)) {
    favorites.delete(id);
  } else {
    favorites.add(id);
  }
  renderList();
  renderFavorites();
}

function copyText(id) {
  const item = entries.find(e=>e.id===id);
  if (!item) return;
  const txt = `${item.word} ‚Äî ${item.definition}`;
  navigator.clipboard.writeText(txt).then(()=> {
    alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: ' + item.word);
  });
}

function escapeHtml(str) {
  if (!str) return '';
  return String(str)
    .replaceAll('&','&amp;')
    .replaceAll('<','&lt;')
    .replaceAll('>','&gt;')
    .replaceAll('"','&quot;')
    .replaceAll("'",'&#39;');
}

init();
</script>
</body>
</html>